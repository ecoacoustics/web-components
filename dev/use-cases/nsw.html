<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Web Components - NSW DPI</title>
    <script type="module" src="/src/index.ts"></script>
  </head>

  <body>
    <oe-verification-grid id="verification-grid" autofocus>
      <oe-verification verified="true" shortcut="Y"></oe-verification>
      <oe-verification verified="false" shortcut="N"></oe-verification>

      <oe-data-source slot="data-source" for="verification-grid" src="/kaleidoscope.csv" local></oe-data-source>
      <!-- <oe-data-source slot="data-source" for="verification-grid" src="/all-complete.csv" local></oe-data-source> -->
    </oe-verification-grid>

    <section id="dev-tools">
      <button id="next-data-source-btn"></button>
    </section>

    <script type="module">
      const dataSourceComponent = document.querySelector("oe-data-source");
      const nextDataSourceBtn = document.getElementById("next-data-source-btn");

      // Uncomment this line to test fast switching data sources (data sources
      // that switch before the first one has finished loading).
      // dataSourceComponent.setAttribute("src", "/grid-items.json");

      function nextDataSource() {
        const nextSources = new Map([
          ["/kaleidoscope.csv", "/some-complete.csv"],
          ["/some-complete.csv", "/mostly-complete.csv"],
          ["/mostly-complete.csv", "/all-complete.csv"],
          ["/all-complete.csv", "/404-invalid.csv"],
          ["/404-invalid.csv", "/kaleidoscope.csv"],
        ]);

        const currentSource = dataSourceComponent.getAttribute("src");
        const nextSource = nextSources.get(currentSource);

        dataSourceComponent.setAttribute("src", nextSource);
        nextDataSourceBtn.textContent = nextSource;
      }

      nextDataSourceBtn.addEventListener("click", nextDataSource);

      nextDataSourceBtn.textContent = dataSourceComponent.getAttribute("src");
    </script>
  </body>
</html>
